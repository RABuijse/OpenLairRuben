<!--Data Entry form -->

<div style="margin: auto;" *ngIf="referenceOptions && learningEventOptions
  && learningActivitiesOptions && (indicatorOptions$ | async)">
  <form [formGroup]="indicatorForm">

    <div class="title">
      Add NEW Indicators and their Metrics
    </div>

    <div class="content-wrapper">
      <div class="form-wrapper">
        <div class="form-element form-element-50">
          <label>Learning Events</label>
          <ng-select formControlName="learningEvent" placeholder="Learning Events" (change)="learningEventSelected($event)"
                     [compareWith]="compareMethod">
            <ng-option *ngFor="let learningEvent of learningEventOptions" [value]="learningEvent">
              {{learningEvent.name}}
            </ng-option>
          </ng-select>
        </div>
        <div class="form-element form-element-50">
          <label>Learning Activities</label>
          <ng-select formControlName="learningActivity" placeholder="Learning Activities" (change)="learningActivitySelected($event)"
                     [compareWith]="compareMethod">
            <ng-option *ngFor="let learningActivity of learningActivitiesOptions" [value]="learningActivity">
              {{learningActivity.name}}
            </ng-option>
          </ng-select>
        </div>
        <div class="form-element form-element-100" *ngIf="similarActivityMessage">
          <div style="color: rgb(4, 117, 14);" *ngIf="similarActivityMessage"
               [innerHTML]="similarActivityMessage"></div>
        </div>
        <div class="form-element form-element-75">
          <label>Indicator Name</label>
          <ng-container *ngIf="!useExistingIndicator">
          <input type="text" formControlName="indicatorName" placeholder="Indicator Name" required/>
          </ng-container>
          <ng-container *ngIf="useExistingIndicator">
            <ng-select formControlName="indicatorName" placeholder="Indicator Name" (change)="indicatorSelected($event)">
              <ng-option *ngFor="let indicator of (indicatorOptions$ | async)" [value]="indicator">
                {{indicator.Title}}
              </ng-option>
            </ng-select>
          </ng-container>
        </div>
        <div class="form-element form-element-25">
          <label>Use existing Indicator</label>
          <input type="checkbox" (change)="checkboxClicked()" [disabled]="shouldDisable()"/>
        </div>
        <div class="form-element form-element-100">
          <label>Reference</label>
          <ng-select formControlName="indicatorReference" placeholder="Reference" [readonly]="this.useExistingIndicator">
            <ng-option *ngFor="let reference of referenceOptions" [value]="reference">
              {{reference.referenceNumber}} {{reference.referenceText}}
            </ng-option>
          </ng-select>
        </div>
        <div class="form-element form-element-100">
          <label>Metrics</label>
          <textarea class="text" cols="30" rows="10" type="text" formControlName="metrics"
                    placeholder="Metrics must be comma seperated" required></textarea>
        </div>
        <button type="submit" class="buttonLaTool save-button"
                (click)='addData()'>Save
        </button>
      </div>
      <div>
        <button
          style="padding: 6px 8px 6px 8px; float: right; margin-right: 8px; background-image: linear-gradient(45deg, #8e1e22 10%, #edcfcf 51%, #8e1e22 100%) !important; box-shadow: 2px 4px 5px 0 #ead8d8;"
          class="buttonLaTool" (click)='logout()'>Logout
        </button>
        <span style="float: right; margin-right: 16px; margin-top: 17px;" *ngIf="CUserName">
       Welcome, {{CUserName}}
      </span>
      </div>
    </div>
  </form>

</div>
